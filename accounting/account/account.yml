# Classes de compte
Account:
  id: serial32
  class: text8(1, null)
  description: text8(1, null) @collate(general)
  # Utilisé si le compte a été modifié récemment
  oldDescription: ?text8(1, null) @collate(general)
  visible: bool = TRUE
  custom: bool = FALSE
  journalCode: ?journal\JournalCode
  vatAccount: ?account\Account
  vatRate: ?decimal(5, 2)
  createdAt: datetime = SPECIAL(now)
  createdBy: user\User = SPECIAL(user)
  INDEX: [
      ["id"],
      ["class"]
  ]

# Exercices comptables
FinancialYear:
  id: serial32
  startDate: date
  endDate: date
  status: enum(OPEN, CLOSE) = OPEN
  hasVat: bool # Est-ce que cet exercice est soumis à la TVA ?
  vatFrequency: ?enum(MONTHLY, QUARTERLY, ANNUALLY)
  taxSystem: ?enum(MICRO_BA, BA_REEL_SIMPLIFIE, BA_REEL_NORMAL, AUTRE_BIC, AUTRE_BNC)
  accountingType: enum(ACCRUAL, CASH, CASH_ACCRUAL) = CASH
  legalCategory: ?int16(1000, 9999) # Catégorie juridique (au sens INSEE) sur 4 chiffres
  associates: ?int8(0, null) # Nombre d'associés
  closeDate: ?date # Quand le bilan de clôture a été réalisé
  openDate: ?date # Quand le bilan d'ouverture a été réalisé
  createdAt: datetime = SPECIAL(now)
  createdBy: user\User = SPECIAL(user)

Log:
  action: text8
  element: text8
  params: ?json = PHP([])
  doneBy: ?user\User = SPECIAL(user)
  createdAt: datetime = SPECIAL(now)

Partner:
  partner: enum(PHP(PartnerSetting::$PARTNERS))
  accessToken: text16
  params: ?json = PHP([])
  createdAt: datetime = SQL(NOW())
  updatedAt: datetime = SQL(NOW())
  expiresAt: ?datetime
  createdBy: user\User = SPECIAL(user)
  updatedBy: user\User = SPECIAL(user)
  UNIQUE: [
    ["partner"]
  ]

ThirdParty:
  id: serial32
  name: text8(1, null) @collate(general)
  clientAccountLabel: ?text8(1, null) @collate(general)
  supplierAccountLabel: ?text8(1, null) @collate(general)
  vatNumber: ?text8
  customer: ?selling\Customer
  names: ?text16 # Quels autres noms récupère-t-on de ce tiers (sur les factures ou autres docs) ?
  memos: ?json = PHP([])
  normalizedName: ?json = PHP([])
  UNIQUE: [
    ["name"],
    ["clientAccountLabel"],
    ["supplierAccountLabel"],
  ]
